{% extends "./base.html" %}
{% block content %}
<h2>Your Cart</h2>

{% if cart_items %}
<form method="post">
  {% csrf_token %}
  <table>
    <tr>
      <th>Product</th><th>Quantity</th><th>Price</th><th>Total</th><th>Action</th>
    </tr>
    {% for item in cart_items %}
    <tr>
      <td>{{ item.product.name }}</td>
      <td>
        <input type="number" name="quantity_{{ item.id }}" value="{{ item.quantity }}" min="0">
      </td>
      <td>${{ item.product.price }}</td>
      <td>${{ item.product.price|floatformat:2|add:item.quantity }}</td>
      <td>
        <a href="{% url 'remove-from-cart-page' item.id %}">❌ Remove</a>
      </td>
    </tr>
    {% endfor %}
  </table>

  <h3>Cart Total: ${{ total }}</h3>

  <button type="submit">Update Cart</button>
</form>

<form method="post" action="{% url 'checkout-page' %}">
  {% csrf_token %}
  <button type="submit">Checkout ✅</button>
</form>
{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
